; generated by ARM C/C++ Compiler, 5.03 [Build 76]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\flash\obj\ad7705_test.o --asm_dir=.\Flash\List\ --list_dir=.\Flash\List\ --depend=.\flash\obj\ad7705_test.d --cpu=Cortex-M4.fp --apcs=interwork -O0 --diag_suppress=870 -I..\..\Libraries\CMSIS\Include -I..\..\Libraries\CMSIS\Device\ST\STM32F4xx\Include -I..\..\Libraries\STM32F4xx_StdPeriph_Driver\inc -I..\..\User\bsp_stm32f4xx\inc -I..\..\User\bsp_stm32f4xx -I..\..\User -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32F40XX --omf_browse=.\flash\obj\ad7705_test.crf ..\..\User\ad7705_test.c]
                          THUMB

                          AREA ||i.GetAD7705||, CODE, READONLY, ALIGN=2

                  GetAD7705 PROC
;;;343    //*********************************************************************************************************
;;;344    void GetAD7705(void)
000000  b510              PUSH     {r4,lr}
;;;345    {	
;;;346    
;;;347    	bsp_InitTM7705();			/* 初始化配置TM7705 */
000002  f7fffffe          BL       bsp_InitTM7705
;;;348    //	TM7705_Scan2();		/* 扫描两个个ADC通道, 无等待的 */
;;;349    	TM7705_CalibSelf(1);		/* 自校准。执行时间较长，约180ms */
000006  2001              MOVS     r0,#1
000008  f7fffffe          BL       TM7705_CalibSelf
;;;350    	adc1 = TM7705_ReadAdc(1);
00000c  2001              MOVS     r0,#1
00000e  f7fffffe          BL       TM7705_ReadAdc
000012  4915              LDR      r1,|L1.104|
000014  8008              STRH     r0,[r1,#0]
;;;351    
;;;352    	TM7705_CalibSelf(2);		/* 自校准。执行时间较长，约180ms */
000016  2002              MOVS     r0,#2
000018  f7fffffe          BL       TM7705_CalibSelf
;;;353    	adc2 = TM7705_ReadAdc(2);
00001c  2002              MOVS     r0,#2
00001e  f7fffffe          BL       TM7705_ReadAdc
000022  4912              LDR      r1,|L1.108|
000024  8008              STRH     r0,[r1,#0]
;;;354    	
;;;355    	/* 计算实际电压值（近似估算的），如需准确，请进行校准 */
;;;356    	volt1 = (adc1 * 5000) / 65535;
000026  4810              LDR      r0,|L1.104|
000028  8800              LDRH     r0,[r0,#0]  ; adc1
00002a  f2413188          MOV      r1,#0x1388
00002e  4348              MULS     r0,r1,r0
000030  f64f71ff          MOV      r1,#0xffff
000034  fb90f0f1          SDIV     r0,r0,r1
000038  ee000a10          VMOV     s0,r0
00003c  eeb80ac0          VCVT.F32.S32 s0,s0
000040  480b              LDR      r0,|L1.112|
000042  ed800a00          VSTR     s0,[r0,#0]
;;;357    	volt2 = (adc2 * 5000) / 65535;
000046  4809              LDR      r0,|L1.108|
000048  8800              LDRH     r0,[r0,#0]  ; adc2
00004a  f2413188          MOV      r1,#0x1388
00004e  4348              MULS     r0,r1,r0
000050  f64f71ff          MOV      r1,#0xffff
000054  fb90f0f1          SDIV     r0,r0,r1
000058  ee000a10          VMOV     s0,r0
00005c  eeb80ac0          VCVT.F32.S32 s0,s0
000060  4804              LDR      r0,|L1.116|
000062  ed800a00          VSTR     s0,[r0,#0]
;;;358    	/* 重新配置1次BMP085 */
;;;359    }
000066  bd10              POP      {r4,pc}
;;;360    /***************************** Hayden (END OF FILE) *********************************/
                          ENDP

                  |L1.104|
                          DCD      adc1
                  |L1.108|
                          DCD      adc2
                  |L1.112|
                          DCD      volt1
                  |L1.116|
                          DCD      volt2

                          AREA ||.data||, DATA, ALIGN=2

                  adc1
000000  0000              DCB      0x00,0x00
                  adc2
000002  0000              DCB      0x00,0x00
                  volt1
                          DCD      0x00000000
                  volt2
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\..\\User\\ad7705_test.c"
	AREA ||.rev16_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___13_ad7705_test_c_708cc61a____REV16|
#line 129 "..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___13_ad7705_test_c_708cc61a____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___13_ad7705_test_c_708cc61a____REVSH|
#line 144
|__asm___13_ad7705_test_c_708cc61a____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
